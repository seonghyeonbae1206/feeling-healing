<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í•„ë§íë§ ê°ì • ì´ë¯¸ì§€ ìƒì„±ê¸°</title>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 50px;
    }
    #resultCard {
      width: 400px;
      height: 400px;
      border: 2px solid #ccc;
      padding: 20px;
      text-align: center;
    }
    #resultCard img {
      width: 150px;
      margin: 20px 0;
    }
    input {
      margin: 10px;
      padding: 5px;
    }
    button {
      margin-top: 10px;
      padding: 8px 12px;
    }
  </style>
</head>
<body>
  <h1>í•„ë§íë§ ê°ì • ì´ë¯¸ì§€ ìƒì„±ê¸°</h1>
  <input type="text" id="name" placeholder="ì´ë¦„ ì…ë ¥">
  <input type="number" id="score" placeholder="ì ìˆ˜ ì…ë ¥">
  <button onclick="generateResult()">ì´ë¯¸ì§€ ë§Œë“¤ê¸°</button>

  <div id="resultCard" style="display:none">
    <h2 id="userName"></h2>
    <img id="userImage" src="">
    <p id="userComment"></p>
  </div>
  <button id="downloadBtn" style="display:none" onclick="downloadImage()">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>

  <script>
    function getResultForScore(score) {
      score = parseInt(score);
      if (score === 24) return { image: "https://cdn-icons-png.flaticon.com/512/1686/1686819.png", comment: "í•˜..ê¸°ë¶„ ì§„ì§œ. ëœì¥ ê³ ì¶”ì¥ ê°™ë„¤. ì•¼ ë„ˆ ì´ë¦¬ì™€ë´." };
      if (score === 27) return { image: "https://cdn-icons-png.flaticon.com/512/1686/1686825.png", comment: "ì‹¬í˜¸í¡ ë”°ìœ„ ê°œë‚˜ ì¤˜ë²„ë ¤. ì§„ì •ë˜ê²Œ ìƒê²¼ì–´?" };
      if (score === 30) return { image: "https://cdn-icons-png.flaticon.com/512/1686/1686823.png", comment: "ë­˜ë´. ê¸°ë¶„ ì•ˆ ì¢‹ì€ ì‚¬ëŒ ì²˜ìŒë´?" };
      if (score === 31) return { image: "https://cdn-icons-png.flaticon.com/512/1686/1686823.png", comment: "ë©ì„ ë•Œë¦´ê¹Œ ë² ê°œë¥¼ ë•Œë¦´ê¹Œ." };
      if (score === 34) return { image: "https://cdn-icons-png.flaticon.com/512/1686/1686823.png", comment: "í•œìˆ¨ë§Œ ë‚˜ì˜¤ëŠ”ë° ë§ í•  í˜ë„ ì—†ë‹¤ ì§€ê¸ˆ.." };
      if (score === 37) return { image: "https://cdn-icons-png.flaticon.com/512/1686/1686823.png", comment: "ë‹¤ ê¹¨ë¶€ìˆœë‹¤ ì•„ì´ì–¸ë§¨ ë¹™ì˜í•œë‹¤ íŒì”¨" };
      if (score === 40) return { image: "https://cdn-icons-png.flaticon.com/512/1686/1686823.png", comment: "ê°œí‚¹ë°›ë„¤ ì–´ì©”ê±´ë° ë§ˆì¸ë“œ ì¢€ í˜•ì„±í• ê²Œ" };
      return { image: "https://cdn-icons-png.flaticon.com/512/742/742751.png", comment: "ê¸°ë¡ëœ ê°ì •ì´ ì—†ì–´ìš” ğŸ˜¶" };
    }

    function generateResult() {
      const name = document.getElementById("name").value;
      const score = document.getElementById("score").value;
      if (!name || !score) {
        alert("ì´ë¦„ê³¼ ì ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”!");
        return;
      }

      const result = getResultForScore(score);

      document.getElementById("userName").innerText = `${name}ë‹˜ì˜ ê°ì • ì ìˆ˜ëŠ” ${score}ì !`;
      document.getElementById("userImage").src = result.image;
      document.getElementById("userComment").innerText = result.comment;

      document.getElementById("resultCard").style.display = 'block';
      document.getElementById("downloadBtn").style.display = 'inline-block';
    }

    function downloadImage() {
      html2canvas(document.getElementById("resultCard")).then(canvas => {
        const link = document.createElement("a");
        link.download = "emotion_result.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    }
  </script>
</body>
</html>